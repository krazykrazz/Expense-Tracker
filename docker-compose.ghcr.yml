# Docker Compose configuration for running Expense Tracker from GitHub Container Registry
# This file demonstrates how to deploy the application using pre-built images from GHCR

version: '3.8'

services:
  expense-tracker:
    # Image from GitHub Container Registry
    # Replace {version} with desired version (e.g., v5.10.0, latest, or specific SHA like 74438c9)
    image: ghcr.io/krazykrazz/expense-tracker:latest
    container_name: expense-tracker
    ports:
      - "2424:2424"
    volumes:
      # Persist database across container restarts
      - ./data:/app/backend/database
      # Persist uploaded files (invoices, statements)
      - ./uploads:/app/backend/uploads
    environment:
      - NODE_ENV=production
      - LOG_LEVEL=info
    restart: unless-stopped

# Example usage:
# 1. Choose your version tag:
#    - latest: Most recent build from main branch
#    - v5.10.0: Specific version release
#    - 74438c9: Specific commit SHA
# 2. Run: docker-compose -f docker-compose.ghcr.yml up -d
#
# Example with specific version:
#   image: ghcr.io/krazykrazz/expense-tracker:v5.10.0
#
# Example with specific SHA:
#   image: ghcr.io/krazykrazz/expense-tracker:74438c9
#
# To pull the latest image:
#   docker-compose -f docker-compose.ghcr.yml pull
#
# To view logs:
#   docker-compose -f docker-compose.ghcr.yml logs -f
#
# To stop:
#   docker-compose -f docker-compose.ghcr.yml down
